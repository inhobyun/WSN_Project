{% extends "m_base.html" %}

{% block foot %}
    <div style="color:aqua;">Analyze Sensor Data...</div>
{% endblock %}

{% block left %}
    <div style="text-align:center;"><Strong>Sensor Data Analysis</Strong></div><br> 
    <div style="text-align: right; padding-right:8px;"><button id="btn_start_1" onclick="startSTEandBDT()"> Run... </button></div><br>
    <div style="text-align: right; padding-right:8px;"><button id="btn_start_2" onclick="startBDTtoSever()" disabled> Run... </button></div><br>
    <div style="text-align: right; padding-right:8px;"><button id="btn_start_3" onclick="startBDTtoFile()"   disabled> Run... </button></div>
    <div style="position:absolute; left:8px; top: 92px;"><label>Run accelometer sensor</label></div>
    <div style="position:absolute; left:8px; top:130px;"><label>Sensor CSV data transfer</label></div>
    <div style="position:absolute; left:8px; top:168px;"><label>Sensor data save to *.csv file</label></div>
{% endblock %}

{% block right %}

<div style="text-align:center; font-weight:bold; font: size 16;"><Strong>SCD Sensor Data Acquisition</Strong></div>
<div style="text-align:left;  font-weight:bold; font: size 16; color:blue" id="inf_message"> </div>
<div style="text-align:left;  font-weight:bold; font: size 20; color:red"  id="err_message"> </div>     

<script>

function startSTEandBDT() {
        // get value from UI
        //const value = document.getElementById('???').value;

        //control UI before function run
        document.getElementById("btn_start_1").disabled = true;
        // display pre-messages
        document.getElementById("inf_message").innerHTML += " &rarr run STE(Short Time Experiment) in sensor and BDT(Block Data Transfer) from sensor to edge device<br>";
        document.getElementById("err_message").innerHTML  = " &excl it will take some minutes, wait until completed";
        // run flask function
        axios.post('/post_STEandBDT', {
            //value: Number(value),
        }).then(response => {
            const data = response.data;
            // display post-message
            document.getElementById("inf_message").innerHTML += "<br> &check completed: " + data.msg_00 + "<br><br>";
            // control UI after function run
            document.getElementById("btn_start_2" ).disabled = false;
        }).catch(function (error) {
            // display error-message
            document.getElementById("err_message").innerHTML  = "<br> &excl Error occurred on submit: ";
            document.getElementById("err_message").innerHTML += error
        });
    }

function startBDTtoSever() {
        // get value from UI
        //const value = document.getElementById('???').value;

        //control UI before function run
        document.getElementById("btn_start_2").disabled = true;
        // display pre-messages
        document.getElementById("inf_message").innerHTML += " &rarr transfer sensor memory data from edge device to server<br>";
        document.getElementById("err_message").innerHTML  = " &excl it will take some minutes, wait until completed";
        // run flask function
        axios.post('/post_BDTtoServer', {
            //value: Number(value),
        }).then(response => {
            const data = response.data;
            // display post-message
            document.getElementById("inf_message").innerHTML += "<br> &check completed: " + data.msg_00 + "<br><br>";
            // control UI after function run
            document.getElementById("btn_start_3" ).disabled = false;    
        }).catch(function (error) {
            // display error-message
            document.getElementById("err_message").innerHTML  = " &excl Error occurred on submit: ";
            document.getElementById("err_message").innerHTML += error;
        });
    }

function startBDTtoFile() {
        // get value from UI
        //const value = document.getElementById('???').value;

        //control UI before function run
        document.getElementById("btn_start_3").disabled = true;
        // display pre-messages
        document.getElementById("inf_message").innerHTML += " &rarr run STE(Short Time Experiment) and BDT(Block Data Transfer) with 3-axis accelometer<br>";
        // run flask function
        axios.post('/post_BDTtoFile', {
            //value: Number(value),
        }).then(response => {
            const data = response.data;
            // display post-message
            document.getElementById("inf_message").innerHTML += "<br> &check completed: " + data.msg_00 + "<br><br>";
            document.getElementById("err_message").innerHTML += "<br> &excl sensor data acquisition done";
        }).catch(function (error) {
            // display error-message
            document.getElementById("err_message").innerHTML  = "<br> &excl Error occurred on submit: ";
            document.getElementById("err_message").innerHTML += error;
        });
    }    

</script>

{% endblock %}